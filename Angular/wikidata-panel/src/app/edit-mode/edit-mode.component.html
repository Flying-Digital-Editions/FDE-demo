
<div class="row explanation" *ngIf="!loading === true">
  <p>To <b>add</b> a new entity select the word and then click on the "Add new entity" button. 
  <br/>
  To <b>modify</b> the ID and the Class of the entity, click on the wanted entity in the list and update the entity.</p>
</div>

<div class="spinner row" *ngIf="loading === true">
  <p>Please wait, text analysis in progress...</p>
  <p-progressSpinner></p-progressSpinner>
</div>

<div class="row" style="max-height: 100vh;">
  <div class="col-md-auto" *ngIf="!loading === true">
    <div class="addButton">
      <button (click)="addNewSpan()">Add new entity</button>
    </div>
    <ol>
      <ng-container *ngFor="let fragment of fragList">
        <li *ngIf="fragment.type === 'span'" id="spansList">
          <span class="mySpan" (click)="handleSpanClick(fragment.data)">{{ fragment.text }}</span>
          <button (click)="deleteEntity(fragment)">Delete entity</button>
        </li>
      </ng-container>
    </ol>    
  </div>


  <div class="col-md-auto bookMode" *ngIf="!loading === true"  (mouseup)="highlightAndOpenCard($event)">
  <div #formattedTextWrapper>
    <ng-container *ngFor="let fragment of textFragments">
      <span *ngIf="fragment.type === 'text'">{{ fragment.text }}</span>
      <span *ngIf="fragment.type === 'span'" class="mySpan">{{ fragment.text }}</span>
    </ng-container>
  </div>
</div>

<div #spanContainer></div>
</div>

<div class = "row saveButton">
  <button *ngIf="!spansSaved && !loading === true" [routerLink]="['../view']" (click)="saveText()">Save Spans</button>
</div>
